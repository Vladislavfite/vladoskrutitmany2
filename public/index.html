<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>VLADOS KRUTIT ‚Äì –ü–∞–Ω–µ–ª—å</title>
  <style>
    body { background:#222; color:#eee; font-family:sans-serif; padding:20px; }
    label { display:block; margin-top:10px; }
    input { width:100%; padding:5px; margin-top:5px; }
    button { margin-top:15px; padding:8px 12px; background:#ffcc00; border:none; cursor:pointer; }
    a { color:#ffcc00; text-decoration:none; display:inline-block; margin-top:15px; }
  </style>
</head>
<body>
  <h1>VLADOS KRUTIT ‚Äì –ü–∞–Ω–µ–ª—å</h1>
  <form id="cfgForm">
    <label>–°—Å—ã–ª–∫–∞ (URL):<input id="url" required></label>
    <label>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (–º–∏–Ω):<input id="workMins" type="number" min="1" required></label>
    <label>–ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–µ–∫):<input id="reloadDelay" type="number" min="1" required></label>
    <label><input id="active" type="checkbox"> –ê–∫—Ç–∏–≤–Ω–æ</label>
    <button type="submit">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </form>
  <a href="/stats" target="_blank">üìä –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</a>

  <script>
    // Load config
    fetch("/bot-config")
      .then(r => r.json())
      .then(cfg => {
        url.value = cfg.url || "";
        workMins.value = cfg.workMins || 60;
        reloadDelay.value = cfg.reloadDelay || 10;
        active.checked = cfg.active;
      });

    // Submit changes
    document.getElementById("cfgForm").onsubmit = e => {
      e.preventDefault();
      const body = {
        url: url.value,
        workMins: +workMins.value,
        reloadDelay: +reloadDelay.value,
        active: active.checked
      };
      fetch("/update-config", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      }).then(() => alert("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!"));
    };
  </script>
</body>
</html>